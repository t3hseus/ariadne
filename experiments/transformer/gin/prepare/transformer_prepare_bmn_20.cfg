preprocess.target_processor = @CloudProcessor
preprocess.output_dir = 'D:/data/bmn_20'
preprocess.ignore_asserts = True

#parse.input_file_mask='data/bes3/events/3.txt'
parse.input_file_mask='D:\\data/bmn_data_small/simdata.txt'

parse.csv_params={
                    "sep": '\s+',
                    #"nrows": 10000,
                    "encoding": 'utf-8',
                    "names":  ['event',  'x', 'y', 'z', 'det', 'station',
                               'track', 'px', 'py', 'pz', 'vx', 'vy', 'vz']
                 }

### events_quantity:
# '1..10' (list of events with these indexes)
# or ':' (all events from df)
# or single index '3'
parse.events_quantity = ':'

# preprocessor
CloudProcessor.transforms = [
    @ConstraintsNormalize()
]

CloudProcessor.n_events_per_chunk = 20

#### transformations
DropShort.num_stations=3
#ConstraintsNormalize.columns=('r', 'phi', 'z')
#ConstraintsNormalize.constraints = {
#    'r': [270., 580.], 'phi': [-3.15, 3.15], 'z': [-2386., 2386.]
#}
ConstraintsNormalize.use_global_constraints = False
ConstraintsNormalize.columns=('x', 'y', 'z')
ConstraintsNormalize.constraints = {
   0: {'x': [-81.1348,82.0652], 'y': [-27.17125, 17.82875], 'z': [11.97, 183.82]},
   1: {'x': [-81.061, 82.139], 'y': [-6.50127, 38.49873], 'z': [11.97, 183.82]},
   2: {'x': [-80.8975, 82.3025],  'y': [-6.29427, 38.70573],  'z': [11.97, 183.82]},
   3: {'x': [-79.6075, 83.5925], 'y': [-6.13927, 38.86073], 'z': [11.97, 183.82]},
   4: {'x': [-78.514, 84.686], 'y': [-6.0953, 38.90473], 'z': [11.97, 183.82]},
   5: {'x': [-77.802, 85.398],  'y': [-6.40627, 38.59373],  'z': [11.97, 183.82]},
   6: {'x': [-77.0185, 86.1815],  'y': [-6.04527, 38.95473],  'z': [11.97, 183.82]}
}

Normalize.columns=('x', 'y', 'z')